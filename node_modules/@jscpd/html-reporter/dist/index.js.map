{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import {join} from 'path';\nimport type {IClone, IOptions, IStatistic} from '@jscpd/core';\nimport {IReporter, JsonReporter} from \"@jscpd/finder\";\nimport {copySync, writeFileSync} from \"fs-extra\";\nimport {green, red} from \"colors/safe\";\nimport * as pug from \"pug\";\n\nexport default class HtmlReporter implements IReporter {\n  constructor(private options: IOptions) {\n  }\n\n  public report(clones: IClone[], statistic: IStatistic): void {\n    const jsonReporter = new JsonReporter(this.options);\n    const json = jsonReporter.generateJson(clones, statistic);\n    const result = pug.renderFile(join(__dirname, './templates/main.pug'), json)\n    if (this.options.output) {\n      const destination = join(this.options.output, 'html/');\n      try {\n        copySync(join(__dirname, '../public'), destination, {overwrite: true});\n        const index = join(destination, 'index.html');\n        writeFileSync(index, result)\n        writeFileSync(join(destination, 'jscpd-report.json'),\n          JSON.stringify(json, null, '  ')\n        );\n        console.log(green(`HTML report saved to ${join(this.options.output, 'html/')}`));\n      } catch (e) {\n        console.log(red(e as string))\n      }\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAmB;AAEnB,oBAAsC;AACtC,sBAAsC;AACtC,kBAAyB;AACzB,UAAqB;AAErB,IAAqB,eAArB,MAAuD;AAAA,EACrD,YAAoB,SAAmB;AAAnB;AAAA,EACpB;AAAA,EAEO,OAAO,QAAkB,WAA6B;AAC3D,UAAM,eAAe,IAAI,2BAAa,KAAK,OAAO;AAClD,UAAM,OAAO,aAAa,aAAa,QAAQ,SAAS;AACxD,UAAM,SAAa,mBAAW,kBAAK,WAAW,sBAAsB,GAAG,IAAI;AAC3E,QAAI,KAAK,QAAQ,QAAQ;AACvB,YAAM,kBAAc,kBAAK,KAAK,QAAQ,QAAQ,OAAO;AACrD,UAAI;AACF,0CAAS,kBAAK,WAAW,WAAW,GAAG,aAAa,EAAC,WAAW,KAAI,CAAC;AACrE,cAAM,YAAQ,kBAAK,aAAa,YAAY;AAC5C,2CAAc,OAAO,MAAM;AAC3B;AAAA,cAAc,kBAAK,aAAa,mBAAmB;AAAA,UACjD,KAAK,UAAU,MAAM,MAAM,IAAI;AAAA,QACjC;AACA,gBAAQ,QAAI,mBAAM,4BAAwB,kBAAK,KAAK,QAAQ,QAAQ,OAAO,CAAC,EAAE,CAAC;AAAA,MACjF,SAAS,GAAG;AACV,gBAAQ,QAAI,iBAAI,CAAW,CAAC;AAAA,MAC9B;AAAA,IACF;AAAA,EACF;AACF;","names":[]}